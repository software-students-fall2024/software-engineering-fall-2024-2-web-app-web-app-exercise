{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/search.css') }}">
{% endblock %}

{% block container %}
    <h1>Search for a Book</h1> 
    <form action="/search" method="GET">
        <label for="title">Book Title:</label>
        <textarea name="title" placeholder="e.g. Gatsby" id="title">{{ userInput.title }}</textarea>
        <label for="genre">Genre:</label>
        <input type="text" name="genre" placeholder="e.g. Fiction" id="genre" value={{ userInput.genre }}>
        <label for="author">Author:</label>
        <textarea name="author" placeholder="e.g. Scott" id="author">{{ userInput.author }}</textarea>
        <label for="priceBelow">Price Under:</label>
        <input type="text" name="priceBelow" placeholder="e.g. 10" id="priceBelow" value={{ userInput.priceBelow }}>
        <label for="priceAbove">Price Over:</label>
        <input type="text" name="priceAbove" placeholder="e.g. 10" id="priceAbove" value={{ userInput.priceAbove }}>
        <label for="dateAdded">Date Added:</label>
        <input type="date" name="dateAdded" id="dateAdded" value={{ userInput.dateAdded }}>
        <label for="regex">Use regular expressions for title, genre, and author?</label>
        <input type="checkbox" name="regex" id="regex" value="yes" {{ userInput.regex }}>
        <input type="submit" value="Search" id="searchButton">
    </form>

    <p id="errorMessage" style="color: red;"> {{ message }} </p>

    <table id="searchResult">
        <thead>
            <tr>
                <th>Book Title</th>
                <th>Genre</th>
                <th>Author</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Date Added</th>
            </tr>
        </thead>
        <tbody>
            {% for book in books %}
            <tr>
                <td><a href="{{ url_for('book_detail', book_id=book['_id']) }}">{{ book["title"] }}</a></td>
                <td>{{ book["genre"] }}</td>
                <td>{{ book["author"] }}</td>
                <td>{{ book["price"] }}</td>
                <td>{{ book["quantity"] }}</td>
                <td>{{ book["date_added"] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}