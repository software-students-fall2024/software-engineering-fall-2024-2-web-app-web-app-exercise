<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <title>Create Project</title>
</head>
{% extends 'base.html' %}{% block container %}
<body>
    {% if task is defined %}
    <header>
        <h1>Edit This Task</h1>
        </header>
        <form class="project-form" action="{{ url_for('edit_task', post_id=project._id, post_name=task.taskName) }}" method="POST">
            <input type="text" name="taskName" value="{{task.taskName}}" required>
            <textarea name="description" required>{{task.description}}</textarea>
        
            <input type="date" name="due_date" value="{{task.due_date}}" required>
            <input type="date" name="members" value="{{members}}">
        
            <button type="submit">Confirm Edits</button>
        </form>
        <form class="project-form" action="{{ url_for('remove_task', post_id=project._id, post_name=task.taskName) }}" method="GET">
            <button type="submit">Remove Task</button>
        </form>
    {% else %}
        {% if edit is defined %}
        <header>
            <h1>Edit Project</h1>
            </header>
            
            <form class="remove_manager" action="{{url_for('remove_user', post_id=project._id, post_name='manager')}}" method="GET">
                <label for="name">Delete a manager:</label>
                <select name="username">
                  {% if managers is defined %}
                  {% for manager in managers %}
                    <option value="{{manager}}">{{manager}} (manager)</div>
                  {% endfor %}
                {% endif %}
                </select>
                <br><br>
                <input type="submit" value="Remove Manager">
              </form>
          
              <form class="remove_manager" action="{{url_for('remove_user', post_id=project._id, post_name='member')}}" method="GET">
                <label for="name">Delete a member:</label>
                <select name="username">
                  {% if members is defined %}
                  {% for member in members %}
                  <option value="{{member}}">{{member}} (member)</div>
                {% endfor %}
                {% endif %}
                </select>
                <br><br>
                <input type="submit" value="Remove Member">
              </form>

              <form class="remove_manager" action="{{url_for('add_user', post_id=project._id, post_name='manager')}}" method="GET">
                <label for="name">Add a manager:</label>
                <select name="username">
                  {% if all_users is defined %}
                  {% for manager in all_users %}
                    <option value="{{manager.username}}">{{manager.username}}</div>
                  {% endfor %}
                {% endif %}
                </select>
                <br><br>
                <input type="submit" value="Add Manager">
              </form>
          
              <form action="{{url_for('add_user', post_id=project._id, post_name='member')}}" method="GET">
                <label for="name">Add a member:</label>
                <select name="username">
                  {% if all_users2 is defined %}
                  {% for member in all_users2 %}
                  <option value="{{member.username}}">{{member.username}}</div>
                    {% endfor %}
                {% endif %}
                </select>
                <br><br>
                <input type="submit" value="Add Member">
              </form>

            <form class="project-form" action="{{ url_for('edit_project', post_id=project._id) }}" method="POST">
                <input type="text" name="project_name" value="{{project.projectName}}" required>
                <textarea name="description" required>{{project.description}}</textarea>
            
                <input type="date" name="start_date" value="{{project.start_date}}" required>
                <input type="date" name="due_date" value="{{project.due_date}}" required>
                <button type="submit">Confirm Edits</button>
            </form>

            <form class="project-form" action="{{ url_for('remove_project', post_id=project._id) }}" method="GET">
                <button type="submit">Remove Project</button>
            </form>
        {% else %}
        <header>
        <h1>Create Project</h1>
        </header>
        
        <form class="project-form" action="{{ url_for('create_project') }}" method="POST">
            <input type="text" name="project_name" placeholder="Your project name" required>
            <textarea name="description" placeholder="Write your description here..." required></textarea>
        
            <input type="date" name="start_date" placeholder="Start date..." required>
            <input type="date" name="due_date" placeholder="Due date..." required>
        
            <button type="submit">Create Project</button>
        </form>
        {% endif %}
    {% endif %}

</body>
{% endblock %}
</html>